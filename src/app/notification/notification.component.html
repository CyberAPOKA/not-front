<div
  class="max-w-4xl mx-auto mt-6 p-6 shadow rounded-xl"
  style="background-color: #ffabf3"
>
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-bold">{{ "TITLE" | translate }}</h2>

    <mat-form-field class="w-60">
      <mat-label>{{ "LANGUAGE" | translate }}</mat-label>
      <mat-select
        [(value)]="currentLang"
        (selectionChange)="changeLanguage($event.value)"
      >
        <mat-select-trigger>
          <img
            [src]="'assets/flags/flag-' + currentLang + '-circle.png'"
            class="w-6 h-6 inline-block mr-2"
          />
          {{
            currentLang === "en"
              ? "English"
              : currentLang === "pt"
              ? "Português"
              : "Español"
          }}
        </mat-select-trigger>

        <mat-option value="en">
          <img
            src="assets/flags/flag-en.png"
            class="inline-block mr-2"
            style="width: 1.5rem; height: 1.5rem"
          />
          English
        </mat-option>
        <mat-option value="pt">
          <img
            src="assets/flags/flag-pt.png"
            class="inline-block mr-2"
            style="width: 1.5rem; height: 1.5rem"
          />
          Português
        </mat-option>
        <mat-option value="es">
          <img
            src="assets/flags/flag-es.png"
            class="inline-block mr-2"
            style="width: 1.5rem; height: 1.5rem"
          />
          Español
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <div class="flex flex-col">
    <mat-form-field class="flex-1">
      <mat-label>{{ "PLACEHOLDER" | translate }}</mat-label>
      <input matInput [(ngModel)]="message" />
    </mat-form-field>

    <button mat-raised-button color="primary" (click)="send()">
      {{ "SEND" | translate }}
    </button>
  </div>

  <div
    class="mt-4 rounded-lg overflow-auto"
    style="background-color: #4e444b !important; max-height: 40rem"
  >
    <div class="flex gap-4 p-4">
      <mat-form-field appearance="outline" class="flex-1">
        <mat-label>{{ "FILTER_MESSAGE" | translate }}</mat-label>
        <input
          matInput
          [(ngModel)]="filterText"
          (ngModelChange)="onFilterChange()"
        />
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-48">
        <mat-label>{{ "FILTER_STATUS" | translate }}</mat-label>
        <mat-select
          [(ngModel)]="filterStatus"
          (selectionChange)="onFilterChange()"
        >
          <mat-option value="">{{ "ALL" | translate }}</mat-option>
          <mat-option value="PENDING">{{ "PENDING" | translate }}</mat-option>
          <mat-option value="PROCESSING">{{
            "PROCESSING" | translate
          }}</mat-option>
          <mat-option value="PROCESSED_SUCCESS">{{
            "PROCESSED_SUCCESS" | translate
          }}</mat-option>
          <mat-option value="PROCESSING_FAILED">{{
            "PROCESSING_FAILED" | translate
          }}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div
      *ngFor="let n of filteredNotifications"
      class="flex flex-col border-b last:border-0 border-white"
    >
      <div class="p-4">
        <span class="text-white font-mono text-sm">{{ n.messageId }}</span>
        <span class="text-white font-bold text-lg">
          "{{ n.messageContent }}" →
        </span>
        <span
          [ngClass]="{
            'text-green-600 font-bold': n.status === 'PROCESSED_SUCCESS',
            'text-red-600 font-bold': n.status === 'PROCESSING_FAILED',
            'text-orange-600':
              n.status.includes('PENDING') || n.status === 'PROCESSING'
          }"
        >
          {{ n.status | translate }}
        </span>
      </div>
    </div>
  </div>
</div>
